
CREATE TABLE IF NOT EXISTS users (
  id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR,
  email VARCHAR UNIQUE
);

CREATE TABLE IF NOT EXISTS categories (
  id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR UNIQUE
);

CREATE TABLE IF NOT EXISTS location (
	id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	lat VARCHAR,
	lon VARCHAR
);

CREATE TABLE IF NOT EXISTS events (
  id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  init INTEGER REFERENCES users (id),
  category INTEGER REFERENCES categories (id),
  location INTEGER REFERENCES location (id),
  limited INTEGER,
  title VARCHAR,
  description VARCHAR,
  annotation VARCHAR,
  state VARCHAR,
  moderation BOOLEAN,
  paid BOOLEAN,
  event_date TIMESTAMP,
  created TIMESTAMP,
  publish_date TIMESTAMP
);

CREATE TABLE IF NOT EXISTS requests (
    id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    requester INTEGER REFERENCES users (id),
    event INTEGER REFERENCES events (id),
    status VARCHAR,
    created TIMESTAMP
);

CREATE TABLE IF NOT EXISTS compilations (
    id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title VARCHAR,
    pinned BOOLEAN
);

CREATE TABLE IF NOT EXISTS events_by_compilations (
    id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    compilation_id INTEGER REFERENCES compilations (id),
    event_id INTEGER REFERENCES events (id)
);







